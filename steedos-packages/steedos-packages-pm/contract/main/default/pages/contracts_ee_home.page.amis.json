{
    "type": "page",
    "title": "Welcome to Steedos",
    "body": [
        {
            "type": "input-date-range",
            "id": "u:de60dc7f7766",
            "label": "签订日期",
            "name": "datetime",
            "ranges": [
                "today",
                "yesterday",
                "prevweek",
                "thisweek",
                "prevmonth",
                "thismonth",
                "lastYear",
                "thisyear",
                "7daysago"
            ],
            "inputClassName": "w-md",
            "mode": "normal",
            "inputFormat": "YYYY-MM-DD",
            "minDate": "",
            "maxDate": "",
            "format": "YYYY-MM-DD HH:mm",
            "embed": false,
            "utc": false,
            "className": "bg-white p r b-a",
            "clearable": false,
            "value": "-6month, now",
            "size": "full",
            "labelClassName": "font-bold"
        },
        {
            "type": "grid",
            "id": "u:99e358f220db",
            "className": "m-t",
            "columns": [
                {
                    "body": [
                        {
                            "type": "service",
                            "id": "u:ad75addedf4e",
                            "body": [
                                {
                                    "type": "panel",
                                    "title": "",
                                    "body": [
                                        {
                                            "type": "grid",
                                            "columns": [
                                                {
                                                    "body": [
                                                        {
                                                            "type": "tpl",
                                                            "tpl": "<div><span class=\"block font-bold \">业绩达成</span><span class=\"text-xl font-bold\">${total_made_invoice_amount}</span> 万元\n<p class=\"text-slate-400\">已开票金额</p>\n</div>",
                                                            "inline": false,
                                                            "style": {},
                                                            "className": "",
                                                            "id": "u:360784f4cfe4"
                                                        }
                                                    ],
                                                    "columnClassName": "w-2/3 flex items-center",
                                                    "id": "u:f429dab8c009"
                                                },
                                                {
                                                    "body": [
                                                        {
                                                            "type": "chart",
                                                            "config": {
                                                                "series": [
                                                                    {
                                                                        "data": "${contracts_pie_data}",
                                                                        "type": "pie",
                                                                        "label": {
                                                                            "show": false
                                                                        },
                                                                        "labelLine": {
                                                                            "show": false
                                                                        },
                                                                        "center": [
                                                                            "50%",
                                                                            "50%"
                                                                        ],
                                                                        "radius": [
                                                                            "50%",
                                                                            "70%"
                                                                        ]
                                                                    }
                                                                ],
                                                                "tooltip": {
                                                                    "trigger": "item"
                                                                }
                                                            },
                                                            "replaceChartOption": true,
                                                            "id": "u:660e01247da1",
                                                            "api": "",
                                                            "name": "collection_invoicing",
                                                            "className": "custom_chart",
                                                            "dataFilter": "",
                                                            "trackExpression": "${contracts_pie_data}"
                                                        }
                                                    ],
                                                    "valign": "",
                                                    "columnClassName": "w-1/3",
                                                    "id": "u:15c58e5fecac",
                                                    "md": ""
                                                }
                                            ],
                                            "id": "u:2951316b3bd6",
                                            "className": "flex"
                                        },
                                        {
                                            "type": "tpl",
                                            "tpl": "<p><span class=\"text-slate-400\">新签合同: </span>${total_amount}万元（待开票：${total_un_made_invoice_amount}万元）</p>",
                                            "inline": false,
                                            "id": "u:32e5d72b089c"
                                        }
                                    ],
                                    "id": "u:be00568443a3",
                                    "affixFooter": false,
                                    "actions": [],
                                    "inline": false
                                }
                            ],
                            "messages": {},
                            "api": {
                                "method": "post",
                                "url": "${context.rootUrl}/service/api/~packages-@steedos/service-charts/queries/contracts_ee_sum_collection_invoicing/results?datetime=${datetime}",
                                "requestAdaptor": "\nvar datetime = api.data.datetime;\nvar start_and_end;\nif (datetime) {\n  start_and_end = datetime.split(',');\n} else {\n  start_and_end = ['', ''];\n}\napi.data.parameters = {\n  datetime: {\n    start: start_and_end[0],\n    end: start_and_end[1]\n  }\n}\n",
                                "adaptor": "\nvar rows = payload?.query_result?.data?.rows;\nif (rows.length) {\n  rows = rows[0]\n} else {\n  rows = { total_amount: 0, total_made_invoice_amount: 0, total_un_made_invoice_amount:0,  rate_percent: 0 }\n}\n\nvar total_amount = rows.total_amount / 10000;\nvar total_made_invoice_amount = rows.total_made_invoice_amount / 10000;\nvar total_un_made_invoice_amount = (rows.total_amount - rows.total_made_invoice_amount)/10000;\nvar contracts_pie_data = [{ value: total_made_invoice_amount, name: \"已开票金额\" },{ value: total_un_made_invoice_amount, name: \"未开票金额\" }]\npayload.data = {\n  total_amount,\n  total_made_invoice_amount,\n  total_un_made_invoice_amount,\n  contracts_pie_data\n};\n\nreturn payload;\n",
                                "headers": {
                                    "Authorization": "Bearer ${context.tenantId},${context.authToken}"
                                },
                                "sendOn": "this.datetime"
                            },
                            "affixFooter": false,
                            "interval": "",
                            "name": "one"
                        }
                    ],
                    "id": "u:920c8548c3b9"
                },
                {
                    "body": [
                        {
                            "type": "service",
                            "id": "u:9b24de71e567",
                            "body": [
                                {
                                    "type": "panel",
                                    "title": "",
                                    "body": [
                                        {
                                            "type": "service",
                                            "id": "u:da7609c74f28",
                                            "messages": {},
                                            "affixFooter": false,
                                            "api": {
                                                "method": "post",
                                                "url": "${context.rootUrl}/service/api/~packages-@steedos/service-charts/queries/contracts_ee_sum_finance_invoice/results?datetime=${datetime}",
                                                "requestAdaptor": "\nvar datetime = api.data.datetime;\nvar start_and_end;\nif (datetime) {\n  start_and_end = datetime.split(',');\n} else {\n  start_and_end = ['', ''];\n}\napi.data.parameters = {\n  datetime: {\n    start: start_and_end[0],\n    end: start_and_end[1]\n  }\n}",
                                                "adaptor": "\nvar rows = payload?.query_result?.data?.rows;\nif (rows.length) {\n  rows = rows[0]\n} else {\n  rows = { total_money: 0 }\n}\n\nvar total_money = rows.total_money / 10000;\nvar received_amount = window.received_amount || 0;\nvar unreceived_amount = (total_money - received_amount).toFixed(2);\npayload.data = {\n  total_money,\n  received_amount,\n  unreceived_amount,\n  chart_data: [\n    { value: received_amount, name: \"已收款金额\" },\n    { value: unreceived_amount, name: \"未收款金额\" }\n  ]\n};\n\nreturn payload;\n",
                                                "headers": {
                                                    "Authorization": "Bearer ${context.tenantId},${context.authToken}"
                                                },
                                                "sendOn": "this.datetime",
                                                "data": null
                                            },
                                            "body": [
                                                {
                                                    "type": "grid",
                                                    "columns": [
                                                        {
                                                            "body": [
                                                                {
                                                                    "type": "tpl",
                                                                    "tpl": "<div><span class=\"block font-bold\">销售收款</span><span class=\"text-xl font-bold\">${received_amount}</span> 万元\n<p class=\"text-slate-400\">已收款金额</p>\n</div>",
                                                                    "inline": false,
                                                                    "style": {},
                                                                    "className": "",
                                                                    "id": "u:4daaf5eee51b"
                                                                }
                                                            ],
                                                            "columnClassName": "w-2/3 flex items-center",
                                                            "id": "u:d29f211712e9"
                                                        },
                                                        {
                                                            "body": [
                                                                {
                                                                    "type": "chart",
                                                                    "config": {
                                                                        "series": [
                                                                            {
                                                                                "data": "${chart_data}",
                                                                                "type": "pie",
                                                                                "center": [
                                                                                    "50%",
                                                                                    "50%"
                                                                                ],
                                                                                "radius": [
                                                                                    "50%",
                                                                                    "70%"
                                                                                ],
                                                                                "label": {
                                                                                    "show": false
                                                                                },
                                                                                "labelLine": {
                                                                                    "show": false
                                                                                }
                                                                            }
                                                                        ],
                                                                        "tooltip": {
                                                                            "trigger": "item"
                                                                        }
                                                                    },
                                                                    "replaceChartOption": true,
                                                                    "id": "u:3a4b04e69800",
                                                                    "api": "",
                                                                    "name": "",
                                                                    "className": "custom_chart",
                                                                    "dataFilter": "",
                                                                    "trackExpression": "${chart_data}"
                                                                }
                                                            ],
                                                            "valign": "",
                                                            "columnClassName": "w-1/3",
                                                            "id": "u:63b219d5b7e1"
                                                        }
                                                    ],
                                                    "id": "u:2ca41d81c62d",
                                                    "className": "flex"
                                                },
                                                {
                                                    "type": "tpl",
                                                    "tpl": "<p><span class=\"text-slate-400\">应收合计: </span>${total_money}万元（待收款：${unreceived_amount}万元）</p>",
                                                    "inline": false,
                                                    "id": "u:6be28664e82a"
                                                }
                                            ]
                                        }
                                    ],
                                    "id": "u:b62093cb589c",
                                    "affixFooter": false,
                                    "actions": [],
                                    "inline": false
                                }
                            ],
                            "messages": {},
                            "api": {
                                "method": "post",
                                "url": "${context.rootUrl}/service/api/~packages-@steedos/service-charts/queries/contracts_ee_sum_finance_receive/results?datetime=${datetime}",
                                "requestAdaptor": "\nvar datetime = api.data.datetime;\nvar start_and_end;\nif (datetime) {\n  start_and_end = datetime.split(',');\n} else {\n  start_and_end = ['', ''];\n}\napi.data.parameters = {\n  datetime: {\n    start: start_and_end[0],\n    end: start_and_end[1]\n  }\n}",
                                "adaptor": "\nvar rows = payload?.query_result?.data?.rows;\nif (rows.length) {\n  rows = rows[0]\n} else {\n  rows = { total_amount: 0}\n}\nvar received_amount = rows.total_amount / 10000;\npayload.data = {\n  received_amount\n};\nwindow.received_amount = received_amount;\nreturn payload;\n",
                                "headers": {
                                    "Authorization": "Bearer ${context.tenantId},${context.authToken}"
                                },
                                "sendOn": "this.datetime"
                            },
                            "affixFooter": false
                        }
                    ],
                    "id": "u:f44fceb7b711"
                },
                {
                    "body": [
                        {
                            "type": "service",
                            "id": "u:4052a2dbab19",
                            "body": [
                                {
                                    "type": "panel",
                                    "title": "",
                                    "body": [
                                        {
                                            "type": "grid",
                                            "columns": [
                                                {
                                                    "body": [
                                                        {
                                                            "type": "tpl",
                                                            "tpl": "<div><span class=\"block font-bold\">采购付款</span><span class=\"text-xl font-bold\">${total_received_invoice_amount}</span> 万元\n<p class=\"text-slate-400\">已付款金额</p>\n</div>",
                                                            "inline": false,
                                                            "style": {},
                                                            "className": "",
                                                            "id": "u:d5be4d6482e3"
                                                        }
                                                    ],
                                                    "columnClassName": "w-2/3 flex items-center",
                                                    "id": "u:4c455e115c5e"
                                                },
                                                {
                                                    "body": [
                                                        {
                                                            "type": "chart",
                                                            "config": {
                                                                "series": [
                                                                    {
                                                                        "data": "${contracts_pie_data}",
                                                                        "type": "pie",
                                                                        "center": [
                                                                            "50%",
                                                                            "50%"
                                                                        ],
                                                                        "radius": [
                                                                            "50%",
                                                                            "70%"
                                                                        ],
                                                                        "label": {
                                                                            "show": false
                                                                        },
                                                                        "labelLine": {
                                                                            "show": false
                                                                        }
                                                                    }
                                                                ],
                                                                "tooltip": {
                                                                    "trigger": "item"
                                                                }
                                                            },
                                                            "replaceChartOption": true,
                                                            "id": "u:82ca2130d320",
                                                            "api": "",
                                                            "name": "",
                                                            "className": "custom_chart",
                                                            "trackExpression": "${contracts_pie_data}"
                                                        }
                                                    ],
                                                    "valign": "",
                                                    "columnClassName": "w-1/3",
                                                    "id": "u:c887e6d3fcc3"
                                                }
                                            ],
                                            "id": "u:a2863f872174",
                                            "className": "flex"
                                        },
                                        {
                                            "type": "tpl",
                                            "tpl": "<p><span class=\"text-slate-400\">应付合计: </span>${total_amount}万元（待付款：${total_not_received_invoice_amount}万元）</p>",
                                            "inline": false,
                                            "id": "u:124607097abf"
                                        }
                                    ],
                                    "id": "u:4a0f22233d5b",
                                    "affixFooter": false,
                                    "actions": [],
                                    "inline": false
                                }
                            ],
                            "messages": {},
                            "api": {
                                "method": "post",
                                "url": "${context.rootUrl}/service/api/~packages-@steedos/service-charts/queries/contracts_ee_sum_payment_received_invoice/results?datetime=${datetime}",
                                "requestAdaptor": "\nvar datetime = api.data.datetime;\nvar start_and_end;\nif (datetime) {\n  start_and_end = datetime.split(',');\n} else {\n  start_and_end = ['', ''];\n}\napi.data.parameters = {\n  datetime: {\n    start: start_and_end[0],\n    end: start_and_end[1]\n  }\n}",
                                "adaptor": "\nvar rows = payload?.query_result?.data?.rows;\nif (rows.length) {\n  rows = rows[0]\n} else {\n  rows = { total_amount: 0, total_received_invoice_amount: 0, total_not_received_invoice_amount: 0}\n}\nvar total_amount = rows.total_amount / 10000;\nvar total_received_invoice_amount = rows.total_received_invoice_amount / 10000;\nvar total_not_received_invoice_amount = (rows.total_amount - rows.total_received_invoice_amount) / 10000;\npayload.data = {\n  total_amount,\n  total_received_invoice_amount,\n  total_not_received_invoice_amount,\n  contracts_pie_data: [\n    { value: total_received_invoice_amount, name: \"已收票金额\" },\n    { value: total_not_received_invoice_amount, name: \"未收票金额\" }\n  ]\n};\n\nreturn payload;\n",
                                "headers": {
                                    "Authorization": "Bearer ${context.tenantId},${context.authToken}"
                                },
                                "sendOn": "this.datetime"
                            },
                            "affixFooter": false
                        }
                    ],
                    "id": "u:0b27945e13be"
                },
                {
                    "body": [
                        {
                            "type": "service",
                            "id": "u:e2a1a0467fdd",
                            "body": [
                                {
                                    "type": "panel",
                                    "title": "",
                                    "body": [
                                        {
                                            "type": "grid",
                                            "columns": [
                                                {
                                                    "body": [
                                                        {
                                                            "type": "tpl",
                                                            "tpl": "<div><span class=\"block font-bold\">执行情况</span><span class=\"text-xl font-bold\">${toperformthe_count}</span> 份\n<p class=\"text-slate-400\">执行中合同&nbsp;</p>\n</div>",
                                                            "inline": false,
                                                            "style": {},
                                                            "className": "",
                                                            "id": "u:1aeb7184fd48"
                                                        }
                                                    ],
                                                    "columnClassName": "w-2/3 flex items-center",
                                                    "id": "u:e6273b29a551"
                                                },
                                                {
                                                    "body": [
                                                        {
                                                            "type": "chart",
                                                            "config": {
                                                                "series": [
                                                                    {
                                                                        "data": "${series_data}",
                                                                        "type": "pie",
                                                                        "label": {
                                                                            "show": true,
                                                                            "position": "inside"
                                                                        },
                                                                        "labelLine": {
                                                                            "show": false
                                                                        }
                                                                    }
                                                                ],
                                                                "tooltip": {
                                                                    "trigger": "item"
                                                                }
                                                            },
                                                            "replaceChartOption": true,
                                                            "id": "u:9ab67d4351c9",
                                                            "api": "",
                                                            "name": "",
                                                            "className": "custom_chart",
                                                            "dataFilter": "",
                                                            "trackExpression": "${series_data}"
                                                        }
                                                    ],
                                                    "valign": "",
                                                    "columnClassName": "w-1/3",
                                                    "id": "u:f7413bcdeee1"
                                                }
                                            ],
                                            "id": "u:c6933dd12d92",
                                            "className": "flex"
                                        },
                                        {
                                            "type": "tpl",
                                            "tpl": "<p><span class=\"text-slate-400\">合同合计: </span>${sum_count}份（已完成：${fullfill_count}份）</p>",
                                            "inline": false,
                                            "id": "u:7ca91e2fdf47"
                                        }
                                    ],
                                    "id": "u:471f7fbc91c9",
                                    "affixFooter": false,
                                    "actions": [],
                                    "inline": false
                                }
                            ],
                            "messages": {},
                            "api": {
                                "method": "post",
                                "url": "${context.rootUrl}/service/api/~packages-@steedos/service-charts/queries/contracts_ee_count_state/results?datetime=${datetime}",
                                "requestAdaptor": "\nvar datetime = api.data.datetime;\nvar start_and_end;\nif (datetime) {\n  start_and_end = datetime.split(',');\n} else {\n  start_and_end = ['', ''];\n}\napi.data.parameters = {\n  datetime: {\n    start: start_and_end[0],\n    end: start_and_end[1]\n  }\n}",
                                "adaptor": "\nvar rows = payload?.query_result?.data?.rows;\nvar legend_data = [], series_data = [], toperformthe_count = 0, sum_count = 0, fullfill_count=0;\nrows.forEach((item) => {\n  var count = item.count;\n  sum_count = sum_count + count;\n  if (item._id === 'notstart') {\n    legend_data.push('未开始');\n    series_data.push({ value: count, name: '未开始' });\n  } else if (item._id === 'toperformthe') {\n    toperformthe_count = count;\n    legend_data.push('执行中');\n    series_data.push({ value: count, name: '执行中' });\n  } else if (item._id === 'fullfill') {\n    fullfill_count = count;\n    legend_data.push('结束');\n    series_data.push({ value: count, name: '结束' });\n  } else if (item._id === 'cancel') {\n    legend_data.push('已取消');\n    series_data.push({ value: count, name: '已取消' });\n  }\n})\n\npayload.data = {\n  sum_count,\n  toperformthe_count,\n  fullfill_count,\n  legend_data,\n  series_data\n};\n\nreturn payload;\n",
                                "headers": {
                                    "Authorization": "Bearer ${context.tenantId},${context.authToken}"
                                },
                                "sendOn": "this.datetime"
                            },
                            "affixFooter": false
                        }
                    ],
                    "id": "u:9f3a6ffa794b"
                }
            ]
        },
        {
            "type": "grid",
            "columns": [
                {
                    "body": [
                        {
                            "type": "chart",
                            "config": {
                                "title": {
                                    "text": "合同应收情况",
                                    "top": "2%",
                                    "left": "1%"
                                },
                                "grid": {
                                    "left": "1%",
                                    "containLabel": true,
                                    "bottom": "10%"
                                },
                                "tooltip": {
                                    "trigger": "axis",
                                    "axisPointer": {
                                        "type": "cross",
                                        "crossStyle": {
                                            "color": "#999"
                                        }
                                    }
                                },
                                "legend": {
                                    "data": [
                                        "月度应收金额",
                                        "月度已收金额"
                                    ],
                                    "top": "10%"
                                },
                                "series": [
                                    {
                                        "name": "月度应收金额",
                                        "type": "line",
                                        "data": "${total_amount}",
                                        "smooth": true
                                    },
                                    {
                                        "name": "月度已收金额",
                                        "type": "bar",
                                        "data": "${total_received_amount}"
                                    }
                                ],
                                "color": [
                                    "#c2c2c2",
                                    "#3a5ad1"
                                ],
                                "xAxis": {
                                    "type": "category",
                                    "data": "${mongth_tag}"
                                },
                                "yAxis": {
                                    "type": "value",
                                    "min": 0,
                                    "interval": 200,
                                    "axisLabel": {
                                        "formatter": "{value} 万"
                                    },
                                    "axisLine": {
                                        "show": true
                                    },
                                    "max": 800
                                }
                            },
                            "replaceChartOption": true,
                            "id": "u:c7fdcb16a723",
                            "api": {
                                "method": "post",
                                "url": "${context.rootUrl}/service/api/~packages-@steedos/service-charts/queries/contracts_ee_sum_collection/results?datetime=${datetime}",
                                "requestAdaptor": "\nconst date = new Date();\nconst this_year = date.getFullYear();\napi.data.parameters = {\n  datetime: {\n    start: this_year + \"-01-01 00:00\",\n    end: this_year + \"-12-31 23:59\"\n  }\n}\n",
                                "adaptor": "\nvar rows = payload?.query_result?.data?.rows;\n\nvar total_amount_array = rows.map((item) => {\n  return item.total_amount/10000;\n})\nvar total_received_amount_array = rows.map((item) => {\n  return item.total_received_amount/10000;\n})\nvar mongth_tag_array = rows.map((item) => {\n  return Number(item.mongth_tag) + '月';\n})\npayload.data = {\n  total_amount: total_amount_array,\n  total_received_amount: total_received_amount_array,\n  mongth_tag: mongth_tag_array,\n};\n\nreturn payload;\n",
                                "headers": {
                                    "Authorization": "Bearer ${context.tenantId},${context.authToken}"
                                }
                            },
                            "className": "bg-white m-b-sm b-a"
                        }
                    ],
                    "md": 5,
                    "id": "u:c16ea2056201"
                },
                {
                    "body": [
                        {
                            "type": "service",
                            "body": [
                                {
                                    "type": "panel",
                                    "title": "<span style='font-size: 18px'>我的待办审批：合同管理</span>",
                                    "body": [
                                        {
                                            "type": "table",
                                            "columns": [
                                                {
                                                    "label": "",
                                                    "type": "link",
                                                    "placeholder": "-",
                                                    "body": "${contract_name}",
                                                    "href": "/app/-/instances/view/${_id}",
                                                    "blank": false,
                                                    "id": "u:d73b43e9270c"
                                                },
                                                {
                                                    "type": "text",
                                                    "name": "submitter_name",
                                                    "label": "",
                                                    "placeholder": "-",
                                                    "id": "u:67bae3b7e45c"
                                                },
                                                {
                                                    "type": "text",
                                                    "label": "",
                                                    "name": "flow_name",
                                                    "placeholder": "-",
                                                    "id": "u:b65a8a842993"
                                                },
                                                {
                                                    "type": "datetime",
                                                    "label": "",
                                                    "name": "modified",
                                                    "placeholder": "-",
                                                    "format": "YYYY-MM-DD HH:mm",
                                                    "width": "8rem",
                                                    "id": "u:6b9314d7a6f8"
                                                }
                                            ],
                                            "id": "u:7948f7266a51",
                                            "source": "${rows}",
                                            "columnsTogglable": "auto",
                                            "title": "",
                                            "affixFooter": false,
                                            "headerClassName": "",
                                            "className": "",
                                            "tableClassName": ""
                                        }
                                    ],
                                    "id": "u:56a102aa8697",
                                    "affixFooter": false,
                                    "className": "Panel--default ",
                                    "bodyClassName": "h-64 overflow-auto",
                                    "headerClassName": "p-t p-l p-b-sm font-bold"
                                }
                            ],
                            "id": "u:30a520d1f132",
                            "messages": {},
                            "api": {
                                "method": "post",
                                "url": "${context.rootUrl}/graphql",
                                "headers": {
                                    "Authorization": "Bearer ${context.tenantId},${context.authToken}"
                                },
                                "data": {
                                    "query": "{ rows: instances(top:5, filters: [[[\"inbox_users\", \"=\", \"{userId}\"],\"or\",[\"cc_users\", \"=\", \"{userId}\"]], [\"category_name\",\"=\",\"合同管理\"]], sort: \"modified desc\") {  _id, name, category_name, flow_name, submitter_name,modified, values }}"
                                },
                                "adaptor": "var rows = payload?.data?.rows;\n\nrows.forEach((item, index) => {\n  var contract_info = item?.values;\n  var newProps = {\n    contract_name: contract_info?.name\n  }\n  rows[index] = Object.assign({}, rows[index], newProps);\n  delete rows[index].values;\n})\n\npayload.data = {\n  rows,\n  count: rows.length\n};\nreturn payload;\n"
                            },
                            "affixFooter": false,
                            "className": ""
                        }
                    ],
                    "id": "u:2fc4f5a3c518"
                }
            ],
            "id": "u:d1c608006d9b"
        },
        {
            "type": "grid",
            "columns": [
                {
                    "body": [
                        {
                            "type": "chart",
                            "config": {
                                "title": {
                                    "text": "合同应付情况",
                                    "top": "2%",
                                    "left": "1%"
                                },
                                "grid": {
                                    "left": "1%",
                                    "containLabel": true,
                                    "bottom": "10%"
                                },
                                "series": [
                                    {
                                        "data": "${total_amount}",
                                        "type": "line",
                                        "name": "应付金额",
                                        "smooth": true
                                    },
                                    {
                                        "name": "已付金额",
                                        "type": "bar",
                                        "data": "${total_paid_amount}",
                                        "smooth": true
                                    }
                                ],
                                "tooltip": {
                                    "trigger": "axis",
                                    "axisPointer": {
                                        "type": "cross",
                                        "crossStyle": {
                                            "color": "#999"
                                        }
                                    }
                                },
                                "legend": {
                                    "data": [
                                        "月度应付金额",
                                        "月度已付金额"
                                    ],
                                    "top": "5%"
                                },
                                "color": [
                                    "#c2c2c2",
                                    "#3a5ad1"
                                ],
                                "xAxis": {
                                    "type": "category",
                                    "data": "${mongth_tag}"
                                },
                                "yAxis": {
                                    "$$comments": {
                                        "axisLine": [
                                            0,
                                            0,
                                            0,
                                            [
                                                "\n    // \"max\": 600\n                "
                                            ]
                                        ]
                                    },
                                    "type": "value",
                                    "min": 0,
                                    "interval": 200,
                                    "axisLabel": {
                                        "formatter": "{value} 万"
                                    },
                                    "axisLine": {
                                        "show": true
                                    }
                                }
                            },
                            "replaceChartOption": true,
                            "id": "u:c7fdcb16a723",
                            "api": {
                                "method": "post",
                                "url": "${context.rootUrl}/service/api/~packages-@steedos/service-charts/queries/contracts_ee_sum_payment/results?datetime=${datetime}",
                                "headers": {
                                    "Authorization": "Bearer ${context.tenantId},${context.authToken}"
                                },
                                "requestAdaptor": "\nconst date = new Date();\nconst this_year = date.getFullYear();\napi.data.parameters = {\n  datetime: {\n    start: this_year + \"-01-01 00:00\",\n    end: this_year + \"-12-31 23:59\"\n  }\n}",
                                "adaptor": "\nvar rows = payload?.query_result?.data?.rows;\n\nvar total_amount_array = rows.map((item) => {\n  return item.total_amount / 10000;\n})\nvar total_paid_amount_array = rows.map((item) => {\n  return item.total_paid_amount / 10000;\n})\nvar mongth_tag_array = rows.map((item) => {\n  return Number(item.mongth_tag) + '月';\n})\npayload.data = {\n  total_amount: total_amount_array,\n  total_paid_amount: total_paid_amount_array,\n  mongth_tag: mongth_tag_array,\n};\nreturn payload;\n"
                            },
                            "className": "bg-white m-b-sm b-a",
                            "affixFooter": false
                        }
                    ],
                    "md": 5,
                    "id": "u:ea67b372ba8b"
                },
                {
                    "body": [
                        {
                            "type": "chart",
                            "config": {
                                "title": {
                                    "text": "合同趋势同比分析",
                                    "top": "2%",
                                    "left": "1%"
                                },
                                "grid": {
                                    "left": "1%",
                                    "containLabel": true,
                                    "bottom": "10%"
                                },
                                "xAxis": [
                                    {
                                        "type": "category",
                                        "data": [
                                            "1月",
                                            "2月",
                                            "3月",
                                            "4月",
                                            "5月",
                                            "6月",
                                            "7月",
                                            "8月",
                                            "9月",
                                            "10月",
                                            "11月",
                                            "12月"
                                        ],
                                        "axisPointer": {
                                            "type": "shadow"
                                        }
                                    }
                                ],
                                "yAxis": [
                                    {
                                        "type": "value",
                                        "name": "",
                                        "axisLabel": {
                                            "formatter": "{value} 万"
                                        },
                                        "axisLine": {
                                            "show": true
                                        }
                                    }
                                ],
                                "series": [
                                    {
                                        "data": "${payment_data}",
                                        "type": "bar",
                                        "name": "采购合同"
                                    },
                                    {
                                        "name": "销售合同",
                                        "type": "bar",
                                        "data": "${collection_data}"
                                    }
                                ],
                                "tooltip": {
                                    "trigger": "axis",
                                    "axisPointer": {
                                        "type": "shadow",
                                        "crossStyle": {
                                            "color": "#999"
                                        }
                                    }
                                },
                                "legend": {
                                    "data": [
                                        "采购合同",
                                        "销售合同"
                                    ],
                                    "top": "10%"
                                }
                            },
                            "replaceChartOption": true,
                            "id": "u:74412edad71f",
                            "api": {
                                "method": "post",
                                "url": "${context.rootUrl}/service/api/~packages-@steedos/service-charts/queries/contracts_ee_sum_analysis/results?datetime=${datetime}",
                                "headers": {
                                    "Authorization": "Bearer ${context.tenantId},${context.authToken}"
                                },
                                "requestAdaptor": "\nconst date = new Date();\nconst this_year = date.getFullYear();\napi.data.parameters = {\n  datetime: {\n    start: this_year + \"-01-01 00:00\",\n    end: this_year + \"-12-31 23:59\"\n  }\n}",
                                "adaptor": "\nvar rows = payload?.query_result?.data?.rows;\nvar rows_obj = {};\nrows.forEach((item) => {\n  rows_obj[item._id] = item;\n})\nvar xAxis = ['01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12'];\nvar type_ids = ['62de585b35d11b01f41c5090', '62de584435d11b01f41c508f'];\nvar payment_data = [], collection_data = [];\nconst date = new Date();\nconst this_year = date.getFullYear();\nxAxis.forEach((item) => {\n  var payment_tag = this_year + \"-\" + item + '-false-true'\n  var collection_tag = this_year + \"-\" + item + '-true-false'\n  if (rows_obj[payment_tag]) {\n    payment_data.push(rows_obj[payment_tag].total_amount/10000);\n  } else {\n    payment_data.push(0);\n  }\n  if (rows_obj[collection_tag]) {\n    collection_data.push(rows_obj[collection_tag].total_amount/10000);\n  } else {\n    collection_data.push(0);\n  } \n})\npayload.data = {\n  payment_data,\n  collection_data\n};\nreturn payload;\n"
                            },
                            "className": "bg-white b-a",
                            "affixFooter": false
                        }
                    ],
                    "id": "u:d7e3a861f56b"
                }
            ],
            "id": "u:a220feade891"
        }
    ],
    "regions": [
        "body"
    ],
    "data": {
        "initialValues": {},
        "appId": "builder",
        "title": "",
        "context": {}
    },
    "style": {},
    "id": "u:4be4474901f5",
    "css": {
        ".contracts_ee_home .antd-Chart.custom_chart": {
            "min-width": "100px",
            "min-height": "100px"
        }
    },
    "className": "contracts_ee_home"
}