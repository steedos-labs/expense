name: bidding
label: 招标名称
type: lookup
reference_to: bidding
sort_no: 100
filterable: true
visible_on: "{{ formData.simple_bidding ? false : true }}"
depend_on: 
  - project_program
filtersFunction: |-
  function(filters,values) {
    return ['project_program', '=', values.project_program]
  }
amis:
  autoFill:
    fillMapping:
      "purchase_method": "${purchase_method}"
      "purchase_type": "${purchase_type}"
      "principal": "${principal}"
    api:
      url: "${context.rootUrl}/graphql"
      method: post
      headers: 
        Authorization: "Bearer ${context.tenantId},${context.authToken}"
      data:
        query: "{rows:bidding(filters: [[\"_id\", \"=\", \"${bidding || _master.record._id}\"]], top: 1){purchase_method, purchase_type,principal}}"